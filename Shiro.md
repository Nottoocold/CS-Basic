# 1.什么是Shiro

`Shiro`是一个功能强大且易于使用的Java安全框架，它执行`身份验证`、`授权`、`加密`和`会话管理`。使用Shiro易于理解的API，您可以快速轻松地保护任何应用程序—从最小的移动应用程序到最大的web和企业应用程序.

官网:https://shiro.apache.org

# 2.Shiro的核心架构

![](http://img.zqqiliyc.love/shiro/202302171303303.png)

- **Subject**: 本质上是当前执行用户的安全特定“视图”。 虽然“用户”一词通常表示人，但它也可以代表第 3 方服务、守护程序帐户、cron 作业或任何类似的东西——基本上是当前与软件交互的任何东西。Subject 实例都绑定到（并且需要）SecurityManager。 当您与 Subject 交互时，这些交互将转换为与 SecurityManager 的交互. 外部应用与subject进行交互，subject记录了当前的操作用户，将用户的概念理解为当前操作的主体。外部程序通过subject进行认证授权，而subject是通过SecurityManager安全管理器进行认证授权
- **SecurityManager**: 是 Shiro 体系结构的核心，充当一种“保护伞”对象，协调其共同形成对象图的内部安全组件。然而，一旦为应用程序配置了 SecurityManager 及其内部对象图，它通常就不再改变，应用程序开发人员几乎将所有时间都花在 `Subject`上。重要的是要认识到，与`Subject`交互时，实际上是SecurityManager在幕后为任何`Subject`安全操作执行所有繁重的工作。这反映在上面的基本流程图中
- **Realm**: 充当 Shiro 和应用程序安全数据之间的“桥梁”或“连接器”。 当需要与安全相关数据（如用户帐户）进行实际交互以执行身份验证（登录）和授权（访问控制）时，Shiro 从为应用程序配置的一个或多个Realm中查找其中的许多内容.  从这个意义上说，Realm 本质上是一个特定于安全的 DAO：它封装了数据源的连接细节，并根据需要使相关数据对 Shiro 可用。 配置 Shiro 时，您必须指定至少一个 Realm 用于身份验证和/或授权。SecurityManager 可以配置多个领域，但至少需要一个

# 3.Shiro中的认证

## 3.1 什么是认证

身份认证，就是判断一个用户是否为合法用户的处理过程。最常用的简单身份认证方式是系统通过核对用户输入的用户名和口令，看其是否与系统中存储的该用户的用户名和口令一致，来判断用户身份是否正确

## 3.2 三个概念

1. **subject**  访问系统的用户. 主体可以是用户、程序等，进行认证的都称为主体
2. **principal** 身份信息, 是主体（subject）进行身份认证的标识，标识必须具有`唯一性`，如用户名、手机号、邮箱地址等，一个主体可以有多个身份，但是必须有一个主身份（Primary Principal）
3. **credential** 凭据信息, 是只有主体自己知道的安全信息，如密码、证书等
