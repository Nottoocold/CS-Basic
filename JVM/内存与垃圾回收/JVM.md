Java代码的执行流程:

![](http://img.zqqiliyc.love/jvm/Java code execution flow.png)

# 1 虚拟机的启动

Java虚拟机的启动是通过**引导类加载器**(bootstrap class loader)创建一个**初始类**(initial class)来完成的，这个类是由虚拟机的具体实现来指定的。

# 2 虚拟机的执行

- 一个运行中的Java虚拟机有一个清晰的任务：**执行Java程序**

- 程序开始执行时它才运行，程序执行结束时，它就停止

- 执行一个所谓的Java程序的时候，真正在执行的是一个叫做**Java虚拟机的进程**

# 3 虚拟机的发展

1. Sun Classic VM，第一款商用虚拟机，内部只有解释器，随jdk1.0发布，jdk1.4时淘汰。

2. Exact VM，jdk1.2时sun推出。准确式内存管理，虚拟机可知道内存中某个位置的数据类型，具备热点探测，解释器和编译器混合工作的模式。

3. sun公司的hotspot，jdk1.3时，成为默认的虚拟机。名字的意思就是热点代码探测技术。
- 通过计数器找出最具编译价值的代码，触发**即时编译或栈上替换**。

- 通过编译器和解释器的配合工作，在最优化的程序响应时间和执行性能中取得平衡。
4. Graal VM，跨语言的的全栈虚拟机，可作为“任何语言的”运行平台。
